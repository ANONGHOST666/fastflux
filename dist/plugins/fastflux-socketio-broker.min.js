!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";!function(t){t.Fastflux.plugins=t.Fastflux.plugins||{},t.Fastflux.plugins.SocketIOBroker=n(15)}(window)},,,function(t,e,n){(function(e){"use strict";var n=function(t,n,r,i,o,s,a,u){if("production"!==e.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===n)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[r,i,o,s,a,u],p=0;c=new Error("Invariant Violation: "+n.replace(/%s/g,function(){return f[p++]}))}throw c.framesToPop=1,c}};t.exports=n}).call(e,n(4))},function(t,e){function n(){c=!1,s.length?u=s.concat(u):f=-1,u.length&&r()}function r(){if(!c){var t=setTimeout(n);c=!0;for(var e=u.length;e;){for(s=u,u=[];++f<e;)s&&s[f].run();f=-1,e=u.length}s=null,c=!1,clearTimeout(t)}}function i(t,e){this.fun=t,this.array=e}function o(){}var s,a=t.exports={},u=[],c=!1,f=-1;a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new i(t,e)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=o,a.addListener=o,a.once=o,a.off=o,a.removeListener=o,a.removeAllListeners=o,a.emit=o,a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(t,e){for(var o,s,a=n(t),u=1;u<arguments.length;u++){o=Object(arguments[u]);for(var c in o)r.call(o,c)&&(a[c]=o[c]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(o);for(var f=0;f<s.length;f++)i.call(o,s[f])&&(a[s[f]]=o[s[f]])}}return a}},,,,,,function(t,e){"use strict";e.bind=function(t,e){t="function"==typeof t.originalFunction&&t.originalFunction||t;var n=function(){return t.apply(e,arguments)};return n.originalFunction=t,n};var n=function(t){return"function"==typeof Array.isArray?Array.isArray(t):t instanceof Array};e.isArray=n,e.isObjectButNotArray=function(t){return!n(t)&&"object"==typeof t},e.isSubclass=function(t,e){return t.prototype instanceof e},e.isUndefined=function(t){return"undefined"==typeof t},e.isString=function(t){return"string"==typeof t},e.isFunction=function(t){return"function"==typeof t},t.exports=e},,,function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=n(5);t.exports=function a(t){var e=this,n=t.setUp,u=t.tearDown,c=t.options,f=r(t,["setUp","tearDown","options"]);i(this,a),this.setUp=n,this.tearDown=u,this.options=s({},c),Object.getOwnPropertyNames(f).forEach(function(t){e[t]=f[t]}),this.configure=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return t=s({},this.options,t),new this.constructor(o({setUp:n,tearDown:u,options:t},f))}}},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t){return function(e){this.emit(t,e)}}function a(t){return function(e){this.dispatch(c({type:t},e))}}function u(t,e){var n={};return Object.getOwnPropertyNames(t).forEach(function(r){var i=t[r];if(!g(i)){if(!v(i)){if(!i)return;i=r}i=e(i)}n[r]=i}),n}var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=n(3),p=n(14),h=n(11),l=h.isUndefined,v=h.isString,g=h.isFunction,y=h.bind,d="fastflux/plugins/SocketIOBroker",m=function b(t,e){o(this,b),this.app=t,this.socket=e},_=function(t){function e(){o(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.emit=function(){var t;return(t=this.socket).emit.apply(t,arguments)},e.prototype.wait=function(){var t;return(t=this.app).wait.apply(t,arguments)},e}(m),w=function(t){function e(){o(this,e),t.apply(this,arguments)}return i(e,t),e.prototype.dispatch=function(){var t;return(t=this.app).dispatch.apply(t,arguments)},e}(m);t.exports=new p({setUp:function(t){var e=this;f(!t.hasCallback(d),"SocketIOBroker: plugin is already enabled");var n=this.options,i=n.socket,o=n.inbound,c=n.outbound;f(!l(i),"options.socket: socket.io-client instance expected"),o=u(o||{},a),c=u(c||{},s),t.addCallback(d,function(e){var n=e.type,o=r(e,["type"]),s=c[n];g(s)&&s.call(new _(t,i),o)});var p=[];Object.getOwnPropertyNames(o).forEach(function(e){var n=[e,y(o[e],new w(t,i))];i.on.apply(i,n),p.push(n)}),i.on("disconnect",function(){e.tearDown(t)}),t.getSocket=function(){return i},t._getInboundEventListenerPairs=function(){return p}},tearDown:function(t){f(t.hasCallback(d),"SocketIOBroker: plugin is not enabled");var e=t.getSocket();t._getInboundEventListenerPairs().forEach(function(t){var n=t[0],r=t[1];e.removeListener(n,r)}),delete t.getSocket,delete t._getInboundEventListenerPairs,t.removeCallback(d)}})}]);